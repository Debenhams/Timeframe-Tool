<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Rota System</title>
    <style>
        /* Global Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #333;
            color: white;
            padding: 10px 20px;
            text-align: center;
        }
        .container {
            width: 90%;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        select, input[type="date"], button {
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            background-color: #5cb85c;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #4cae4c;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 12px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        td {
            background-color: #fafafa;
        }
        .hidden {
            display: none;
        }
        /* Timeline Styles */
        .timeline {
            display: grid;
            grid-template-columns: 100px repeat(7, 1fr);
            grid-gap: 5px;
            margin-top: 20px;
        }
        .timeline div {
            padding: 5px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            text-align: center;
        }
        .timeline .time-slot {
            background-color: #e9e9e9;
        }
        .timeline .shift {
            background-color: #d9edf7;
            cursor: pointer;
        }
        .timeline .shift:hover {
            background-color: #bce8f1;
        }
    </style>
</head>
<body>

<header>
    <h1>Team Rota System</h1>
</header>

<div class="container">
    <div>
        <label for="viewMode">View Mode:</label>
        <select id="viewMode" onchange="changeViewMode()">
            <option value="team">Team View</option>
            <option value="individual">Individual View</option>
        </select>
    </div>

    <div id="individualViewControls" class="hidden">
        <label for="advisorSelect">Select Advisor:</label>
        <select id="advisorSelect" onchange="renderRota()">
            <option value="Luke Pashley">Luke Pashley</option>
            <option value="Ameena Malik">Ameena Malik</option>
            <option value="Carrie-Ann Raw">Carrie-Ann Raw</option>
            <option value="Danielle Smith">Danielle Smith</option>
            <option value="Farwa Shaheen">Farwa Shaheen</option>
            <option value="Gemma Emmett">Gemma Emmett</option>
            <option value="Laura Stockburn">Laura Stockburn</option>
            <option value="Millie Walsh">Millie Walsh</option>
            <option value="Tunis Foley">Tunis Foley</option>
        </select>

        <label for="dateInput">Select Date:</label>
        <input type="date" id="dateInput" onchange="renderRota()">
    </div>

    <div id="rotaContainer"></div>

    <div id="timelineContainer" class="hidden">
        <h2>Weekly Timeline</h2>
        <div class="timeline" id="weeklyTimeline"></div>
    </div>
</div>

<script>
    const advisors = [
        'Luke Pashley', 'Ameena Malik', 'Carrie-Ann Raw', 'Danielle Smith',
        'Farwa Shaheen', 'Gemma Emmett', 'Laura Stockburn', 'Millie Walsh', 'Tunis Foley'
    ];

    const shifts = ['Morning', 'Afternoon', 'Evening', 'Night', 'Off'];

    let rotaData = {};
    let viewMode = 'team';

    function initializeRotaData() {
        advisors.forEach(advisor => {
            rotaData[advisor] = {};
            for (let i = 0; i < 7; i++) {
                rotaData[advisor][i] = '';
            }
        });
    }

    function changeViewMode() {
        viewMode = document.getElementById('viewMode').value;
        document.getElementById('individualViewControls').classList.toggle('hidden', viewMode === 'team');
        document.getElementById('timelineContainer').classList.toggle('hidden', viewMode !== 'individual');
        renderRota();
    }

    function renderRota() {
        const advisor = document.getElementById('advisorSelect') ? document.getElementById('advisorSelect').value : null;
        const date = document.getElementById('dateInput') ? new Date(document.getElementById('dateInput').value) : new Date();

        if (viewMode === 'team') {
            renderTeamRota(date);
        } else if (viewMode === 'individual' && advisor) {
            renderIndividualRota(advisor, date);
        }
    }

    function renderTeamRota(date) {
        let html = '<h2>Team Rota</h2><table><thead><tr><th>Advisor</th>';
        for (let i = 0; i < 7; i++) {
            const day = new Date(date);
            day.setDate(day.getDate() + i);
            html += `<th>${day.toLocaleDateString()}</th>`;
        }
        html += '</tr></thead><tbody>';

        advisors.forEach(advisor => {
            html += `<tr><td>${advisor}</td>`;
            for (let i = 0; i < 7; i++) {
                html += `<td>${rotaData[advisor][i]}</td>`;
            }
            html += '</tr>';
        });

        html += '</tbody></table>';
        document.getElementById('rotaContainer').innerHTML = html;
    }

    function renderIndividualRota(advisor, date) {
        let html = `<h2>${advisor}'s Rota</h2><table><thead><tr><th>Shift</th><th>Time</th><th>Action</th></tr></thead><tbody>`;
        shifts.forEach((shift, index) => {
            html += `<tr><td>${shift}</td><td>${getShiftTime(shift)}</td><td><button onclick="assignShift('${advisor}', ${index})">Assign</button></td></tr>`;
        });
        html += '</tbody></table>';
        document.getElementById('rotaContainer').innerHTML = html;
    }

    function getShiftTime(shift) {
        switch (shift) {
            case 'Morning': return '08:00 - 12:00';
            case 'Afternoon': return '12:00 - 16:00';
            case 'Evening': return '16:00 - 20:00';
            case 'Night': return '20:00 - 00:00';
            case 'Off': return 'Day Off';
            default: return '';
        }
    }

    function assignShift(advisor, shiftIndex) {
        const shift = shifts[shiftIndex];
        const date = document.getElementById('dateInput') ? new Date(document.getElementById('dateInput').value) : new Date();
        const dayOfWeek = date.getDay();
        rotaData[advisor][dayOfWeek] = shift;
        renderRota();
    }

    function renderWeeklyTimeline() {
        let html = '<div class="time-slot">Time</div>';
        advisors.forEach(advisor => {
            html += `<div>${advisor}</div>`;
        });

        for (let hour = 0; hour < 24; hour++) {
            html += `<div>${hour}:00</div>`;
            advisors.forEach(advisor => {
                html += `<div class="shift" onclick="assignShift('${advisor}', ${hour})">${getShiftForTime(advisor, hour)}</div>`;
            });
        }

        document.getElementById('weeklyTimeline').innerHTML = html;
    }

    function getShiftForTime(advisor, hour) {
        // Implement logic to return the shift for a given advisor at a specific hour
        return '';
    }

    // Initialize
    initializeRotaData();
    renderRota();
</script>

</body>
</html>
